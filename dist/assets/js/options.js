import{d as D,j as T,r as u,b as k,c as v,a as g,e as t,f as A,h as i,v as d,t as B,_ as E,i as F}from"./_plugin-vue_export-helper.js";import{D as N,S as p}from"./types.js";const C={class:"options-container"},U={class:"form-group"},V={class:"form-group"},G={class:"form-group"},I={class:"form-group"},P={key:0,class:"save-status"},K=D({__name:"App",setup(R){const r=T({...N}),a=u(""),l=u(""),m=u(null),f=u(null);function b(s){const e=new ArrayBuffer(s.length*2),o=new Uint16Array(e);for(let n=0,w=s.length;n<w;n++)o[n]=s.charCodeAt(n);return e}function c(s){return Array.from(new Uint8Array(s)).map(e=>e.toString(16).padStart(2,"0")).join("")}const S=async()=>{try{const s={...r};if(a.value){const e=crypto.getRandomValues(new Uint8Array(16)),o=await crypto.subtle.importKey("raw",b(a.value),{name:"PBKDF2"},!1,["deriveBits"]),n=await crypto.subtle.deriveBits({name:"PBKDF2",salt:e,iterations:1e5,hash:"SHA-256"},o,256);s.passwordHash=c(n),s.salt=c(e.buffer)}await chrome.storage.local.set({[p.SETTINGS]:s}),a.value="",l.value="Settings saved successfully!"}catch(s){console.error("Error saving settings:",s),l.value="Error: Could not save settings."}setTimeout(()=>{l.value=""},3e3)},y=()=>{chrome.storage.local.get(null,s=>{console.log("[Focus Forge Debug] All items in chrome.storage.local:"),console.log(JSON.parse(JSON.stringify(s)))})};return k(async()=>{const s=await chrome.storage.local.get(p.SETTINGS);s[p.SETTINGS]&&Object.assign(r,s[p.SETTINGS]),m.value&&m.value.addEventListener("submit",e=>{e.preventDefault(),S()}),f.value&&f.value.addEventListener("click",y)}),(s,e)=>(g(),v("div",C,[e[13]||(e[13]=t("h1",null,"Focus Forge Settings",-1)),t("form",{ref_key:"formRef",ref:m},[t("section",null,[e[6]||(e[6]=t("h2",null,"Timer Durations (minutes)",-1)),t("div",U,[e[4]||(e[4]=t("label",{for:"focusDuration"},"Focus Duration",-1)),i(t("input",{id:"focusDuration",type:"number","onUpdate:modelValue":e[0]||(e[0]=o=>r.focusDuration=o),min:"0.5"},null,512),[[d,r.focusDuration,void 0,{number:!0}]])]),t("div",V,[e[5]||(e[5]=t("label",{for:"breakDuration"},"Break Duration",-1)),i(t("input",{id:"breakDuration",type:"number","onUpdate:modelValue":e[1]||(e[1]=o=>r.breakDuration=o),min:"0.5"},null,512),[[d,r.breakDuration,void 0,{number:!0}]])])]),t("section",null,[e[8]||(e[8]=t("h2",null,"Security",-1)),t("div",G,[e[7]||(e[7]=t("label",{for:"password"},"Password (to end breaks early)",-1)),i(t("input",{id:"password",type:"password","onUpdate:modelValue":e[2]||(e[2]=o=>a.value=o),placeholder:"Leave blank to not change"},null,512),[[d,a.value]])]),e[9]||(e[9]=t("p",{class:"form-hint"},"Password is stored securely using PBKDF2 hashing. We never store your raw password.",-1))]),t("section",null,[e[11]||(e[11]=t("h2",null,"Destruction Mode",-1)),t("div",I,[e[10]||(e[10]=t("label",{for:"blueScreenCycles"},"Fake Blue Screen after N cycles",-1)),i(t("input",{id:"blueScreenCycles",type:"number","onUpdate:modelValue":e[3]||(e[3]=o=>r.blueScreenCycles=o),min:"1"},null,512),[[d,r.blueScreenCycles,void 0,{number:!0}]])])]),e[12]||(e[12]=t("button",{type:"submit",class:"btn-save"},"Save Settings",-1)),l.value?(g(),v("p",P,B(l.value),1)):A("",!0)],512)]))}}),L=E(K,[["__scopeId","data-v-96adc523"]]);F(L).mount("#app");
